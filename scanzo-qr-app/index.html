<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0D1117" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#f8fafc" media="(prefers-color-scheme: light)">
    <meta name="color-scheme" content="dark light">
    <title>ScanzoQR - Secure Offline QR Sharing</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://unpkg.com/@zxing/library@latest"></script>
    
    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body data-theme="dark">
    <!-- 🎯 Theme Toggle - Simple & Clean -->
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
        <i class="fas fa-sun"></i>
    </button>

    <div id="app">
        <!-- 💫 Animated Background -->
        <div class="animated-bg">
            <div class="bg-bubble bubble-1"></div>
            <div class="bg-bubble bubble-2"></div>
            <div class="bg-bubble bubble-3"></div>
            <div class="bg-bubble bubble-4"></div>
        </div>

        <!-- 🧭 Header -->
        <header class="header">
            <div class="container">
                <div class="logo">
                    <i class="fas fa-qrcode"></i>
                    <h1>ScanzoQR</h1>
                </div>
                <nav class="nav">
                    <button class="nav-btn active" data-tab="home">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </button>
                    <button class="nav-btn" data-tab="generate">
                        <i class="fas fa-plus-circle"></i>
                        <span>Generate</span>
                    </button>
                    <button class="nav-btn" data-tab="scan">
                        <i class="fas fa-camera"></i>
                        <span>Scan</span>
                    </button>
                    <button class="nav-btn" data-tab="history">
                        <i class="fas fa-history"></i>
                        <span>History</span>
                    </button>
                </nav>
            </div>
        </header>

        <!-- 🎯 Main Content -->
        <main class="main">
            <!-- 🏠 Home Tab -->
            <section id="home" class="tab-content active">
                <div class="container">
                    <div class="hero animate-fade-up">
                        <h2>Secure Offline QR Sharing</h2>
                        <p>Share text and images with QR codes that work completely offline ✨</p>
                        
                        <div class="feature-cards">
                            <div class="feature-card animate-slide-up" style="animation-delay: 0.1s">
                                <div class="feature-icon public">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <h3>Public Mode</h3>
                                <p>Instant sharing - anyone can scan & read</p>
                            </div>
                            <div class="feature-card animate-slide-up" style="animation-delay: 0.2s">
                                <div class="feature-icon private">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <h3>Private Mode</h3>
                                <p>Password-protected secure sharing</p>
                            </div>
                            <div class="feature-card animate-slide-up" style="animation-delay: 0.3s">
                                <div class="feature-icon offline">
                                    <i class="fas fa-wifi-slash"></i>
                                </div>
                                <h3>100% Offline</h3>
                                <p>No internet required, ever</p>
                            </div>
                            <div class="feature-card animate-slide-up" style="animation-delay: 0.4s">
                                <div class="feature-icon themes">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <h3>Mixed Themes</h3>
                                <p>Fire orange dark & purple light modes</p>
                            </div>
                        </div>

                        <div class="cta-buttons">
                            <button class="btn btn-primary" onclick="switchTab('generate')">
                                <i class="fas fa-plus"></i>
                                Create QR Code
                            </button>
                            <button class="btn btn-secondary" onclick="switchTab('scan')">
                                <i class="fas fa-camera"></i>
                                Scan QR Code
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 🎨 Generate Tab -->
            <section id="generate" class="tab-content">
                <div class="container">
                    <div class="generate-section">
                        <h2 class="section-title">
                            <i class="fas fa-magic"></i>
                            Generate QR
                        </h2>

                        <!-- Mode Selector -->
                        <div class="mode-selector">
                            <button class="mode-btn active" data-mode="public">
                                <i class="fas fa-globe"></i>
                                <span>Public Mode</span>
                                <small>Anyone can scan instantly</small>
                            </button>
                            <button class="mode-btn" data-mode="private">
                                <i class="fas fa-lock"></i>
                                <span>Private Mode</span>
                                <small>Password protected</small>
                            </button>
                        </div>

                        <!-- Content Type -->
                        <div class="content-type-selector">
                            <button class="type-btn active" data-type="text">
                                <i class="fas fa-font"></i>
                                Text
                            </button>
                            <button class="type-btn" data-type="image">
                                <i class="fas fa-image"></i>
                                Image
                            </button>
                        </div>

                        <!-- Input Section -->
                        <div class="input-section">
                            <!-- Text Input -->
                            <div id="text-input" class="input-container active">
                                <label for="text-content">What do you want to share?</label>
                                <textarea id="text-content" placeholder="Type your message here..." rows="5"></textarea>
                                <div class="char-counter">
                                    <span id="char-count">0</span> characters
                                </div>
                            </div>

                            <!-- Image Input -->
                            <div id="image-input" class="input-container">
                                <label>Choose your image:</label>
                                <div class="file-upload-area" id="file-upload">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Drop your image here or <span>browse</span></p>
                                    <input type="file" id="image-file" accept="image/*" hidden>
                                </div>
                                <div id="image-preview" class="image-preview"></div>
                            </div>

                            <!-- Password Input -->
                            <div id="password-section" class="password-section">
                                <label for="qr-password">Set password:</label>
                                <div class="password-input">
                                    <input type="password" id="qr-password" placeholder="Enter password">
                                    <button type="button" class="password-toggle">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="password-strength">
                                    <div class="strength-bar">
                                        <div class="strength-fill"></div>
                                    </div>
                                    <span class="strength-text">Enter a password</span>
                                </div>
                            </div>

                            <button class="btn btn-primary" id="generate-btn">
                                <i class="fas fa-magic"></i>
                                Generate QR Code
                            </button>
                        </div>

                        <!-- QR Result -->
                        <div id="qr-result" class="qr-result">
                            <div class="qr-container">
                                <div class="qr-canvas-wrapper">
                                    <canvas id="qr-canvas"></canvas>
                                    <div class="qr-overlay">
                                        <div class="qr-shine"></div>
                                    </div>
                                </div>
                                <div class="qr-info">
                                    <h3 id="qr-title">Your QR Code</h3>
                                    <p id="qr-description">Ready to share!</p>
                                    <div class="qr-stats">
                                        <div class="stat">
                                            <i class="fas fa-shield-alt"></i>
                                            <span id="qr-mode">Public</span>
                                        </div>
                                        <div class="stat">
                                            <i class="fas fa-file-alt"></i>
                                            <span id="qr-type">Text</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="qr-actions">
                                <button class="btn btn-warning" id="download-btn">
                                    <i class="fas fa-download"></i>
                                    Download
                                </button>
                                <button class="btn btn-success" id="share-btn">
                                    <i class="fas fa-share-alt"></i>
                                    Share
                                </button>
                                <button class="btn btn-primary" id="save-btn">
                                    <i class="fas fa-save"></i>
                                    Save
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 📷 Scan Tab -->
            <section id="scan" class="tab-content">
                <div class="container">
                    <div class="scan-section">
                        <h2 class="section-title">
                            <i class="fas fa-camera"></i>
                            Scan QR
                        </h2>

                        <!-- Scanner -->
                        <div class="scanner-container">
                            <div class="scanner-frame">
                                <video id="scanner-video" autoplay playsinline></video>
                                <canvas id="scanner-canvas" style="display: none;"></canvas>
                                <div class="scanner-overlay">
                                    <div class="scan-area">
                                        <div class="corner corner-tl"></div>
                                        <div class="corner corner-tr"></div>
                                        <div class="corner corner-bl"></div>
                                        <div class="corner corner-br"></div>
                                        <div class="scan-line"></div>
                                    </div>
                                </div>
                                <div class="scanner-controls">
                                    <button class="scanner-btn" id="start-scan" title="Start Camera">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="scanner-btn" id="stop-scan" title="Stop Camera">
                                        <i class="fas fa-stop"></i>
                                    </button>
                                    <button class="scanner-btn" id="upload-qr" title="Upload Image">
                                        <i class="fas fa-upload"></i>
                                    </button>
                                    <button class="scanner-btn" id="switch-camera" title="Switch Camera">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <input type="file" id="qr-upload" accept="image/*" hidden>
                            
                            <div class="scanner-status">
                                <div class="status-indicator" id="scanner-status">
                                    <i class="fas fa-circle"></i>
                                    <span>Ready to scan</span>
                                </div>
                            </div>
                        </div>

                        <!-- Scan Result -->
                        <div id="scan-result" class="scan-result">
                            <div class="result-header">
                                <h3>Scanned Content</h3>
                                <div class="result-type" id="result-type">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Public</span>
                                </div>
                            </div>
                            
                            <!-- Password Prompt -->
                            <div id="password-prompt" class="password-prompt">
                                <div class="password-lock">
                                    <i class="fas fa-lock"></i>
                                    <h4>Password protected QR</h4>
                                    <p>Enter password to unlock</p>
                                </div>
                                <div class="password-input">
                                    <input type="password" id="unlock-password" placeholder="Password">
                                    <button class="btn btn-primary" id="unlock-btn">
                                        <i class="fas fa-unlock"></i>
                                        Unlock
                                    </button>
                                </div>
                                <div id="password-error" class="error-message"></div>
                            </div>

                            <!-- Content Display -->
                            <div id="content-display" class="content-display">
                                <div id="text-result" class="text-result"></div>
                                <div id="image-result" class="image-result"></div>
                            </div>

                            <div class="result-actions">
                                <button class="btn btn-secondary" id="copy-result">
                                    <i class="fas fa-copy"></i>
                                    Copy
                                </button>
                                <button class="btn btn-warning" id="download-result">
                                    <i class="fas fa-download"></i>
                                    Download
                                </button>
                                <button class="btn btn-primary" id="save-result">
                                    <i class="fas fa-save"></i>
                                    Save
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 📜 History Tab -->
            <section id="history" class="tab-content">
                <div class="container">
                    <div class="history-section">
                        <div class="history-header">
                            <h2 class="section-title">
                                <i class="fas fa-history"></i>
                                History
                            </h2>
                            <div class="history-controls">
                                <button class="btn btn-danger" id="clear-history">
                                    <i class="fas fa-trash"></i>
                                    Clear
                                </button>
                                <button class="btn btn-success" id="export-history">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>

                        <!-- Filter Tabs -->
                        <div class="filter-tabs">
                            <button class="filter-btn active" data-filter="all">
                                <i class="fas fa-list"></i>
                                All
                            </button>
                            <button class="filter-btn" data-filter="generated">
                                <i class="fas fa-plus"></i>
                                Generated
                            </button>
                            <button class="filter-btn" data-filter="scanned">
                                <i class="fas fa-camera"></i>
                                Scanned
                            </button>
                            <button class="filter-btn" data-filter="public">
                                <i class="fas fa-globe"></i>
                                Public
                            </button>
                            <button class="filter-btn" data-filter="private">
                                <i class="fas fa-lock"></i>
                                Private
                            </button>
                        </div>

                        <!-- Search -->
                        <div class="search-bar">
                            <i class="fas fa-search"></i>
                            <input type="text" id="history-search" placeholder="Search your QR codes...">
                            <button class="search-clear" id="clear-search">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>

                        <!-- Stats -->
                        <div class="history-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-qrcode"></i>
                                </div>
                                <div class="stat-info">
                                    <h4 id="total-qrs">0</h4>
                                    <p>Total QRs</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-plus-circle"></i>
                                </div>
                                <div class="stat-info">
                                    <h4 id="generated-qrs">0</h4>
                                    <p>Generated</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-camera"></i>
                                </div>
                                <div class="stat-info">
                                    <h4 id="scanned-qrs">0</h4>
                                    <p>Scanned</p>
                                </div>
                            </div>
                        </div>

                        <!-- History List -->
                        <div id="history-list" class="history-list"></div>

                        <!-- Empty State -->
                        <div id="history-empty" class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-inbox"></i>
                            </div>
                            <h3>No QR codes yet</h3>
                            <p>Create your first QR code to see it here</p>
                            <button class="btn btn-primary" onclick="switchTab('generate')">
                                <i class="fas fa-plus"></i>
                                Create First QR
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- ⏳ Loading -->
        <div id="loading" class="loading-overlay">
            <div class="loading-spinner">
                <div class="spinner">
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                    <div class="spinner-blade"></div>
                </div>
                <p class="loading-text">Working...</p>
            </div>
        </div>

        <!-- 🔔 Toast -->
        <div id="toast" class="toast">
            <div class="toast-content">
                <i class="toast-icon"></i>
                <span class="toast-message"></span>
            </div>
            <button class="toast-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="toast-progress"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>
